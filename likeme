#!/usr/bin/awk -f

BEGIN {
  ZARGV[1]=ARGV[1]
  ARGV[1]=""
}

function email_link(project){
  print "💝[Interested in sponsoring?](mailto:cross-info@ucsc.edu?"
  print "subject="ZARGV[1]": Interested in "project
  print "&body=I am interested in sponsoring -- particularly the project"project".)\n"
}

/^[^💝]/ || // {
  print $0
}

/^## / {
  ZORS=ORS; ORS=""
  $1 = ""
  gsub(/ \(.*\)/, "")
  project = $0
  email_link(project)
  ORS=ZORS
}

/^### / {
  ZORS=ORS; ORS=""
  email_link(project)
  ORS=ZORS
}
